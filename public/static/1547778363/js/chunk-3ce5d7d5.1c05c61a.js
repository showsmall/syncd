(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3ce5d7d5"],{5031:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-layout",{staticClass:"app-layer-main"},[a("a-layout-sider",{staticClass:"app-layer-aside",attrs:{trigger:null,theme:"light",collapsible:""},model:{value:t.collapsed,callback:function(e){t.collapsed=e},expression:"collapsed"}},[a("div",{staticClass:"logo"},[t.collapsed?a("img",{staticClass:"small",attrs:{src:n("cf05")}}):a("img",{staticClass:"normal",attrs:{src:n("cf05")}})]),a("a-menu",{staticClass:"app-layer-menu",attrs:{theme:"light",mode:"inline",selectedKeys:t.selectedKeys,openKeys:t.openKeys},on:{select:t.handleMenuSelect,openChange:t.handleOpenChange}},[t._l(t.appMenu,function(e){return[e.meta.single&&e.children&&1==e.children.length?a("a-menu-item",{key:e.children[0].name},[a(e.children[0].meta.icon,{tag:"component"}),a("span",{staticClass:"app-menu-title"},[t._v(t._s(e.children[0].meta.title))])],1):a("a-sub-menu",{key:e.name},[a("span",{attrs:{slot:"title"},slot:"title"},[a(e.meta.icon,{tag:"component"}),a("span",{staticClass:"app-menu-title"},[t._v(t._s(e.meta.title))])],1),t._l(e.children,function(e){return a("a-menu-item",{key:e.name,staticClass:"app-menu-title"},[a("icon-square"),a("span",{staticClass:"app-menu-title sub-menu"},[t._v(t._s(e.meta.title))])],1)})],2)]})],2)],1),a("a-layout",{staticClass:"app-layer-body"},[a("a-layout-header",{staticClass:"app-layer-header"},[a("div",{staticClass:"icon-menu-fold",on:{click:t.handleCollapsed}},[t.collapsed?a("IconMenuFold"):a("IconMenuUnfold")],1),a("div",{staticClass:"header-right"},[a("a-dropdown",{staticClass:"dropdown",attrs:{trigger:["click"]}},[a("span",{staticClass:"ant-dropdown-link",attrs:{href:"#"}},[a("icon-question",{staticClass:"icon"}),a("icon-caret-down",{staticClass:"icon-small"})],1),a("a-menu",{staticClass:"menu-wide",attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",[a("a",{attrs:{href:"https://github.com/dreamans/syncd/issues",target:"_blank"}},[t._v("帮助")])]),a("a-menu-item",[a("a",{attrs:{href:"https://github.com/dreamans/syncd",target:"_blank"}},[t._v("为Syncd做贡献")])])],1)],1),a("a-dropdown",{staticClass:"dropdown",attrs:{trigger:["click"]}},[a("span",{staticClass:"ant-dropdown-link",attrs:{href:"#"}},[a("a-avatar",{attrs:{shape:"square",size:"small",src:t.userAvatar}},[t._v(t._s(t.userName))]),a("icon-caret-down",{staticClass:"icon-small"})],1),a("a-menu",{staticClass:"menu-wide",attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",{staticClass:"pure-text"},[a("strong",[t._v(t._s(t.userName))])]),a("a-menu-divider"),a("a-menu-item",{on:{click:t.handleOpenMySettingDialog}},[a("span",[a("icon-setting"),t._v(" 个人设置")],1)]),a("a-menu-item",{on:{click:t.dialogOpenPasswordDialog}},[a("span",[a("a-icon",{attrs:{type:"key"}}),t._v(" 修改密码")],1)]),a("a-menu-divider"),a("a-menu-item",{on:{click:t.handleLogout}},[a("span",[a("icon-logout"),t._v(" 退出登录")],1)])],1)],1)],1)]),a("a-layout-content",{staticClass:"app-layer-content"},[a("div",{staticClass:"app-layer-content-header"},[t.breadCrumb.length?a("a-breadcrumb",{staticClass:"header-breadcrumb"},t._l(t.breadCrumb,function(e){return a("a-breadcrumb-item",[t._v(t._s(e))])})):t._e()],1),a("div",{staticClass:"app-layer-content-body"},[a("router-view"),a("div",{staticClass:"app-cpy"},[a("p",[t._v("©️ 2019 Syncd 版权所有, MIT License. "),a("a",{attrs:{href:"https://github.com/dreamans/syncd",target:"_blank"}},[a("a-icon",{attrs:{type:"github"}})],1)])])],1)]),a("a-modal",{attrs:{title:"个人设置",visible:t.dialogMySettingVisible,okText:"确定",cancelText:"取消",destroyOnClose:!0},on:{ok:t.dialogSubmitMySetting,cancel:t.dialogCancelMySetting}},[a("user-setting-component",{ref:"mySettingRef"})],1),a("a-modal",{attrs:{title:"修改密码",visible:t.dialogPasswordVisible,okText:"确定",cancelText:"取消",destroyOnClose:!0},on:{ok:t.dialogSubmitPassword,cancel:t.dialogCancelPassword}},[a("user-password-component",{ref:"passwordRef"})],1)],1)],1)},s=[],r=(n("7f7f"),n("ac6a"),n("a18c")),i=n("c24f"),o=n("92fa"),l=n.n(o),c=n("24b4"),u={render:function(){var t=arguments[0],e=this.form,n=e.getFieldDecorator,a=(e.getFieldValue,{labelCol:{span:6},wrapperCol:{span:16}});return t("a-form",[t("a-form-item",l()([{props:a},{attrs:{label:"角色"}}]),[this.$store.getters["account/getGroupName"]]),t("a-form-item",l()([{props:a},{attrs:{label:"头像"}}]),[t("a-avatar",{attrs:{shape:"square",size:64,src:this.$store.getters["account/getAvatar"]}}),t("div",{class:"app-font-small"},[t("a",{attrs:{href:"http://cn.gravatar.com/support/activating-your-account/",target:"_blank"}},[t("a-icon",{attrs:{type:"question-circle"}})," 如何修改头像"])])]),t("a-form-item",l()([{props:a},{attrs:{label:"用户名"}}]),[t("template",{slot:"help"},[t("span",{class:"app-font-small"},[t("a-icon",{attrs:{type:"info-circle"}})," 修改用户名请联系管理员"])]),t("a-input",{attrs:{value:this.$store.getters["account/getUserName"],disabled:!0}})]),t("a-form-item",l()([{props:a},{attrs:{label:"邮箱"}}]),[t("template",{slot:"help"},[t("span",{class:"app-font-small"},[t("a-icon",{attrs:{type:"info-circle"}})," 修改邮箱请联系管理员"])]),t("a-input",{attrs:{value:this.$store.getters["account/getEmail"],disabled:!0}})]),t("a-form-item",l()([{props:a},{attrs:{label:"真实姓名"}}]),[n("true_name",{initialValue:this.$store.getters["account/getTrueName"]})(t("a-input",{attrs:{autocomplete:"off",placeholder:"请输入真实姓名"}}))]),t("a-form-item",l()([{props:a},{attrs:{label:"手机号"}}]),[n("mobile",{rules:[{validator:function(t,e,n){e||n(),/^1[3456789][0-9]{9}$/.test(e)&&n(),n("手机号格式错误")}}],initialValue:this.$store.getters["account/getMobile"],validateTrigger:"blur"})(t("a-input",{attrs:{autocomplete:"off",placeholder:"11位数字，目前只支持中国(+86)手机号"}}))])])}},d=c["Form"].create()(u),p={render:function(){var t=arguments[0],e=this.form,n=e.getFieldDecorator,a=(e.getFieldValue,{labelCol:{span:6},wrapperCol:{span:16}});return t("a-form",[t("a-form-item",l()([{props:a},{attrs:{label:"当前密码"}}]),[n("password",{rules:[{required:!0,message:"当前密码不能为空"},{type:"string",min:6,max:20,message:"密码必须为6-20个字符"}],validateTrigger:"blur"})(t("a-input",{attrs:{type:"password",autocomplete:"off",placeholder:"请输入当前密码"}}))]),t("a-form-item",l()([{props:a},{attrs:{label:"新密码"}}]),[n("newpassword",{rules:[{required:!0,message:"新密码不能为空"},{type:"string",min:6,max:20,message:"密码必须为6-20个字符"}],validateTrigger:"blur"})(t("a-input",{attrs:{type:"password",autocomplete:"off",placeholder:"请输入新密码 6-20个字符"}}))])])}},m=c["Form"].create()(p),f={components:{UserSettingComponent:d,UserPasswordComponent:m},data:function(){return{collapsed:!1,openKeys:[],selectedKeys:[],breadCrumb:[],dialogMySettingVisible:!1,dialogPasswordVisible:!1}},computed:{userAvatar:function(){return this.$store.getters["account/getAvatar"]},userName:function(){return this.$store.getters["account/getUserName"]},userPriv:function(){return this.$store.getters["account/getPriv"]},appMenu:function(){var t=this,e=[];return r["b"].forEach(function(n){var a={name:n.name,meta:n.meta,children:[]};n.children.forEach(function(e){if(!e.meta.hide||t.$route.name==e.name){if(e.meta.role&&!t.$root.CheckPrivs(e.meta.role))return;a.children.push({name:e.name,meta:e.meta})}}),a.children.length>0&&e.push(a)}),e},defaultOpenKeys:function(){var t=this,e=[];return r["b"].forEach(function(n){n.children&&!n.meta.single&&n.children.forEach(function(a){a.name==t.$route.name&&(e=[n.name])})}),e}},watch:{"$route.name":function(){this.initMenuSelectStatus()}},methods:{handleLogout:function(){var t=this;Object(i["l"])().then(function(e){t.$root.DeleteLoginToken(),t.$root.GotoRouter("login")}).catch(function(e){t.$root.DeleteLoginToken(),t.$root.GotoRouter("login")})},handleCollapsed:function(){this.collapsed||(this.openKeys=[]),this.collapsed=!this.collapsed},handleMenuSelect:function(t){var e=t.key;this.menuSelect(e),this.gotoMenuRouter(e)},handleOpenChange:function(t){t.length?this.openKeys=[t[t.length-1]]:this.openKeys=[]},menuSelect:function(t){var e=[];r["b"].forEach(function(n){n.children.forEach(function(a){a.name==t&&(n.meta.title&&e.push(n.meta.title),e.push(a.meta.title))})}),this.breadCrumb=e,this.selectedKeys=t?[t]:[]},gotoMenuRouter:function(t){this.$router.push({name:t})},initMenuSelectStatus:function(){this.menuSelect(this.$route.name),this.handleOpenChange(this.defaultOpenKeys)},dialogOpenPasswordDialog:function(){this.dialogPasswordVisible=!0},dialogSubmitPassword:function(){var t=this;this.$refs.passwordRef.validateFields(function(e,n){if(!e){var a={password:t.$root.Md5Sum(n.password),newpassword:t.$root.Md5Sum(n.newpassword)};Object(i["q"])(a).then(function(e){t.$message.success("密码修改成功, 需要重新登录",1,function(){t.handleLogout()})}).catch(function(e){1008==e.code&&t.$message.error("当前密码错误")})}})},dialogCancelPassword:function(){this.dialogPasswordVisible=!1},handleOpenMySettingDialog:function(){this.dialogMySettingVisible=!0},dialogSubmitMySetting:function(){var t=this;this.$refs.mySettingRef.validateFields(function(e,n){e||Object(i["p"])(n).then(function(e){t.$message.success("个人信息更新成功",1,function(){t.initLoginStatus(),t.dialogCancelMySetting()})})})},dialogCancelMySetting:function(){this.dialogMySettingVisible=!1},initLoginStatus:function(){var t=this;Object(i["k"])().then(function(e){e.is_login?t.$store.dispatch("account/login",{user_id:e.user_id,name:e.name,email:e.email,priv:e.priv,group_name:e.group_name,mobile:e.mobile,true_name:e.true_name}):t.$root.GotoRouter("login")}).catch(function(e){t.$message.warning("用户未登录",1),t.$root.GotoRouter("login")})}},mounted:function(){this.initMenuSelectStatus(),this.initLoginStatus()}},g=f,h=n("2877"),b=Object(h["a"])(g,a,s,!1,null,null,null);b.options.__file="Layer.vue";e["default"]=b.exports},"92fa":function(t,e){var n=/^(attrs|props|on|nativeOn|class|style|hook)$/;function a(t,e){return function(){t&&t.apply(this,arguments),e&&e.apply(this,arguments)}}t.exports=function(t){return t.reduce(function(t,e){var s,r,i,o,l;for(i in e)if(s=t[i],r=e[i],s&&n.test(i))if("class"===i&&("string"===typeof s&&(l=s,t[i]=s={},s[l]=!0),"string"===typeof r&&(l=r,e[i]=r={},r[l]=!0)),"on"===i||"nativeOn"===i||"hook"===i)for(o in r)s[o]=a(s[o],r[o]);else if(Array.isArray(s))t[i]=s.concat(r);else if(Array.isArray(r))t[i]=[s].concat(r);else for(o in r)s[o]=r[o];else t[i]=e[i];return t},{})}},c24f:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"m",function(){return r}),n.d(e,"o",function(){return i}),n.d(e,"f",function(){return o}),n.d(e,"e",function(){return l}),n.d(e,"c",function(){return c}),n.d(e,"g",function(){return u}),n.d(e,"n",function(){return d}),n.d(e,"r",function(){return p}),n.d(e,"i",function(){return m}),n.d(e,"h",function(){return f}),n.d(e,"b",function(){return g}),n.d(e,"d",function(){return h}),n.d(e,"j",function(){return b}),n.d(e,"l",function(){return y}),n.d(e,"k",function(){return v}),n.d(e,"p",function(){return C}),n.d(e,"q",function(){return w});var a=n("e1d2");function s(t){return Object(a["a"])("/user/group/checkexists",t)}function r(t){return Object(a["b"])("/user/group/new",t)}function i(t){return Object(a["b"])("/user/group/update",t)}function o(t){return Object(a["a"])("/user/group/list",t)}function l(t){return Object(a["a"])("/user/group/detail",t)}function c(t){return Object(a["b"])("/user/group/delete",t)}function u(){return Object(a["a"])("/user/group/priv")}function d(t){return Object(a["b"])("/user/new",t)}function p(t){return Object(a["b"])("/user/update",t)}function m(t){return Object(a["a"])("/user/list",t)}function f(t){return Object(a["a"])("/user/detail",t)}function g(t){return Object(a["a"])("/user/checkexists",t)}function h(t){return Object(a["b"])("/user/delete",t)}function b(t){return Object(a["b"])("/user/login",t)}function y(){return Object(a["b"])("/user/logout")}function v(){return Object(a["a"])("/user/login/status")}function C(t){return Object(a["b"])("/user/my/update",t)}function w(t){return Object(a["b"])("/user/my/password",t)}},cf05:function(t,e,n){t.exports=n.p+"static/1547778363/img/logo.8ba55f46.png"}}]);