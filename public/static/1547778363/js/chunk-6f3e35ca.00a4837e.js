(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6f3e35ca","chunk-2d22bd3f"],{"214f":function(t,e,a){"use strict";var i=a("32e9"),n=a("2aba"),o=a("79e5"),r=a("be13"),s=a("2b4c");t.exports=function(t,e,a){var l=s(t),c=a(r,l,""[t]),d=c[0],p=c[1];o(function(){var e={};return e[l]=function(){return 7},7!=""[t](e)})&&(n(String.prototype,t,d),i(RegExp.prototype,l,2==e?function(t,e){return p.call(t,this,e)}:function(t){return p.call(t,this)}))}},"386d":function(t,e,a){a("214f")("search",1,function(t,e,a){return[function(a){"use strict";var i=t(this),n=void 0==a?void 0:a[e];return void 0!==n?n.call(a,i):new RegExp(a)[e](String(i))},a]})},"41db":function(t,e,a){"use strict";a.d(e,"o",function(){return n}),a.d(e,"d",function(){return o}),a.d(e,"h",function(){return r}),a.d(e,"g",function(){return s}),a.d(e,"e",function(){return l}),a.d(e,"f",function(){return c}),a.d(e,"k",function(){return d}),a.d(e,"j",function(){return p}),a.d(e,"c",function(){return u}),a.d(e,"a",function(){return h}),a.d(e,"p",function(){return f}),a.d(e,"b",function(){return m}),a.d(e,"q",function(){return g}),a.d(e,"i",function(){return b}),a.d(e,"l",function(){return _}),a.d(e,"m",function(){return y}),a.d(e,"n",function(){return v});var i=a("e1d2");function n(t){return Object(i["b"])("/deploy/apply/submit",t)}function o(t){return Object(i["a"])("/deploy/apply/list",t)}function r(t){return Object(i["a"])("/deploy/apply/space/list",t)}function s(t){return Object(i["a"])("/deploy/apply/project/list",t)}function l(t){return Object(i["a"])("/deploy/apply/project/all",t)}function c(t){return Object(i["a"])("/deploy/apply/project/detail",t)}function d(t){return Object(i["a"])("/deploy/apply/repo/taglist",t)}function p(t){return Object(i["a"])("/deploy/apply/repo/commitlist",t)}function u(t){return Object(i["a"])("/deploy/apply/detail",t)}function h(t){return Object(i["b"])("/deploy/apply/audit",t)}function f(t){return Object(i["b"])("/deploy/apply/unaudit",t)}function m(t){return Object(i["b"])("/deploy/apply/discard",t)}function g(t){return Object(i["b"])("/deploy/apply/update",t)}function b(t){return Object(i["a"])("/deploy/apply/log",t)}function _(t){return Object(i["b"])("/deploy/deploy/start",t)}function y(t){return Object(i["a"])("/deploy/deploy/status",t)}function v(t){return Object(i["b"])("/deploy/deploy/stop",t)}},"92fa":function(t,e){var a=/^(attrs|props|on|nativeOn|class|style|hook)$/;function i(t,e){return function(){t&&t.apply(this,arguments),e&&e.apply(this,arguments)}}t.exports=function(t){return t.reduce(function(t,e){var n,o,r,s,l;for(r in e)if(n=t[r],o=e[r],n&&a.test(r))if("class"===r&&("string"===typeof n&&(l=n,t[r]=n={},n[l]=!0),"string"===typeof o&&(l=o,e[r]=o={},o[l]=!0)),"on"===r||"nativeOn"===r||"hook"===r)for(s in o)n[s]=i(n[s],o[s]);else if(Array.isArray(n))t[r]=n.concat(o);else if(Array.isArray(o))t[r]=[n].concat(o);else for(s in o)n[s]=o[s];else t[r]=e[r];return t},{})}},af43:function(t,e,a){"use strict";var i=a("92fa"),n=a.n(i),o=(a("7f7f"),a("ac6a"),a("24b4")),r=a("41db"),s={render:function(){var t=this,e=arguments[0],a=this.form,i=a.getFieldDecorator,o=a.getFieldValue,r={labelCol:{span:6},wrapperCol:{span:16}},s=function(){var a=[];return t.tagList.forEach(function(t){a.push(e("a-select-option",{attrs:{value:"".concat(t)}},["".concat(t)]))}),a},l=function(){var a=[];return t.commitList.forEach(function(t){a.push(e("a-select-option",{attrs:{value:"".concat(t)}},["".concat(t)]))}),a};return i("project_id",{initialValue:this.detail.project_id}),i("id",{initialValue:this.detail.id}),e("a-form",[e("a-form-item",n()([{props:r},{attrs:{label:"项目名称"}}]),[this.projectDetail.name]),e("a-form-item",n()([{props:r},{attrs:{label:"上线单名称"}}]),[i("name",{rules:[{required:!0,message:"上线单名称不能为空"}],validateTrigger:"blur",initialValue:this.detail.name})(e("a-input",{attrs:{autocomplete:"off",placeholder:"请输入上线单名称"}}))]),e("a-form-item",n()([{props:r},{attrs:{label:"上线模式"}}]),[1==this.projectDetail.repo_mode?e("span",[e("a-icon",{attrs:{type:"branches"}})," 分支上线 - ",e("strong",[this.projectDetail.repo_branch])," 分支"]):e("span",[e("a-icon",{attrs:{type:"tag"}})," Tag上线"])]),1==this.projectDetail.repo_mode?e("a-form-item",n()([{props:r},{attrs:{label:"选择上线版本"}}]),[i("commit",{rules:[{required:!0,message:"选择上线版本"}],validateTrigger:"blur"})(e("div")),e("div",[e("a-select",{attrs:{showSearch:!0,placeholder:"关键词搜索",notFoundContent:this.fetching?void 0:"未找到数据",defaultActiveFirstOption:!1},on:{change:this.handleSelectCommit},style:{width:"100%"}},[this.fetching?e("a-spin",{slot:"notFoundContent",attrs:{size:"small"}}):"",l()]),e("a-button",{on:{click:this.handleFetchCommitList}},[e("a-icon",{attrs:{type:"sync",spin:this.fetching}})," ",this.fetchBtnTitle]),o("commit")?e("div",{style:"line-height: 1; margin-top: 10px;"},["选择版本 - ",o("commit")]):"",this.detail.repo_branch&&this.detail.repo_commit?e("div",{style:"line-height: 1; margin-top: 10px;"},[e("p",["当前版本 - ",this.detail.repo_branch," - ",this.detail.repo_commit])]):""])]):"",2==this.projectDetail.repo_mode?e("a-form-item",n()([{props:r},{attrs:{label:"选择上线Tag"}}]),[i("tag",{rules:[{required:!0,message:"选择上线Tag"}],validateTrigger:"blur"})(e("div")),e("a-row",{attrs:{gutter:10}},[e("a-col",{attrs:{span:16}},[e("a-select",{attrs:{showSearch:!0,placeholder:"关键词搜索",notFoundContent:this.fetching?void 0:"未找到数据",defaultActiveFirstOption:!1},on:{change:this.handleSelectTags},style:{width:"100%"}},[this.fetching?e("a-spin",{slot:"notFoundContent",attrs:{size:"small"}}):"",s()])]),e("a-col",{attrs:{span:8}},[e("a-button",{on:{click:this.handleFetchTagList}},[e("a-icon",{attrs:{type:"sync",spin:this.fetching}})," ",this.fetchBtnTitle])])]),""!=this.detail.repo_tag?e("div",[this.detail.repo_tag]):""]):"",e("a-form-item",n()([{props:r},{attrs:{help:this.nameHelp,label:"上线说明"}}]),[i("description",{rules:[{required:!0,message:"请填写上线说明"}],validateTrigger:"blur",initialValue:this.detail.description})(e("a-textarea",{attrs:{placeholder:"请详细填写上线说明",rows:3}}))])])},props:{detail:{type:Object,default:function(){return{}}}},data:function(){return{projectDetail:{},fetching:!1,commitList:[],tagList:[],fetchBtnTitle:"拉取列表"}},methods:{handleSelectCommit:function(t){this.form.setFieldsValue({commit:t})},handleSelectTags:function(t){this.form.setFieldsValue({tag:t})},handleFetchCommitList:function(){var t=this;this.fetching=!0,this.fetchBtnTitle="列表拉取中...",Object(r["j"])({id:this.detail.project_id}).then(function(e){t.fetching=!1,e.list&&(t.commitList=e.list),t.fetchBtnTitle="列表拉取成功"}).catch(function(e){t.fetching=!1,t.fetchBtnTitle="列表拉取失败",t.$error({title:"列表拉取失败",content:e.message,okText:"知道了"})})},handleFetchTagList:function(){var t=this;this.fetching=!0,this.fetchBtnTitle="列表拉取中...",Object(r["k"])({id:this.detail.project_id}).then(function(e){t.fetching=!1,e.list&&(t.tagList=e.list),t.fetchBtnTitle="列表拉取成功"}).catch(function(e){t.fetching=!1,t.fetchBtnTitle="列表拉取失败",t.$error({title:"列表拉取失败",content:e.message,okText:"知道了"})})},loadProjectDetail:function(){var t=this;Object(r["f"])({id:this.detail.project_id}).then(function(e){t.projectDetail=e})}},mounted:function(){this.loadProjectDetail()}};e["a"]=o["Form"].create()(s)},cbf4:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-card",{staticClass:"app-card",attrs:{title:"上线单管理",bordered:!1}},[a("div",{staticClass:"app-btn-group"},[a("a-row",{attrs:{gutter:10}},[a("a-col",{attrs:{span:3}},[a("a-select",{staticStyle:{width:"100%"},attrs:{allowClear:"",placeholder:"选择提交时间",optionFilterProp:"children"},model:{value:t.search.time,callback:function(e){t.$set(t.search,"time",e)},expression:"search.time"}},t._l(t.searchTime,function(e){return a("a-select-option",{attrs:{value:e.day}},[t._v(t._s(e.title))])}))],1),a("a-col",{attrs:{span:3}},[a("a-select",{staticStyle:{width:"100%"},attrs:{allowClear:"",placeholder:"状态",optionFilterProp:"children"},model:{value:t.search.status,callback:function(e){t.$set(t.search,"status",e)},expression:"search.status"}},t._l(t.searchStatus,function(e){return a("a-select-option",{attrs:{value:e.id}},[t._v(t._s(e.title))])}))],1),a("a-col",{attrs:{span:12}},[a("a-select",{staticStyle:{width:"100%"},attrs:{allowClear:"",showSearch:"",placeholder:"选择项目",notFoundContent:"无项目数据",optionFilterProp:"children"},model:{value:t.search.projectId,callback:function(e){t.$set(t.search,"projectId",e)},expression:"search.projectId"}},t._l(t.searchProjectList,function(e){return a("a-select-option",{attrs:{value:e.id}},[t._v(t._s(e.space_name)+" "),a("a-icon",{attrs:{type:"right"}}),t._v(" "+t._s(e.name)+" "),0==e.status?a("span",[t._v("(未启用)")]):t._e()],1)}))],1),a("a-col",{attrs:{span:6}},[a("a-input-search",{attrs:{placeholder:"关键词搜索，ID、名称",enterButton:""},on:{search:t.handleSearch},model:{value:t.search.keyword,callback:function(e){t.$set(t.search,"keyword",e)},expression:"search.keyword"}})],1)],1)],1),a("a-table",{attrs:{columns:t.tableColumns,dataSource:t.tableSource,pagination:t.pagination,loading:t.tableLoading},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"user_name",fn:function(e,i){return a("span",{staticClass:"app-cursor"},[i.user_name?[a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("span",[t._v(t._s(i.user_email))])]),t._v("\n                    "+t._s(i.user_name)+"\n                ")],2)]:[a("span",{staticClass:"app-line-through"},[t._v("已删除")])]],2)}},{key:"project_name",fn:function(e,i){return a("span",{},[i.space_name&&i.project_name?[t._v("\n                    "+t._s(i.space_name)+" "),a("a-icon",{staticClass:"app-color-gray",attrs:{type:"right"}}),t._v(" "+t._s(i.project_name)+"\n                ")]:[a("span",{staticClass:"app-line-through"},[t._v("已删除")])]],2)}},{key:"name",fn:function(e,i){return a("span",{class:t.rowClassName(i.status)},[t._v("\n                "+t._s(e)+"\n            ")])}},{key:"ctime",fn:function(e,i){return a("span",{staticClass:"app-cursor"},[a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("span",[t._v(t._s(t.$root.FormatDateTime(e)))])]),t._v("\n                    "+t._s(t.$root.FormatDateFromNow(e))+"\n                ")],2)],1)}},{key:"status",fn:function(e,i){return a("span",{class:t.rowClassName(i.status)},[1==e?a("span",[a("a-icon",{attrs:{type:"clock-circle"}}),t._v(" 待审核")],1):t._e(),2==e?a("span",[a("a-icon",{attrs:{type:"warning"}}),t._v(" 审核拒绝")],1):t._e(),3==e?a("span",[a("a-icon",{attrs:{type:"smile"}}),t._v(" 待上线")],1):t._e(),4==e?a("span",[a("a-icon",{attrs:{type:"coffee"}}),t._v(" 上线中")],1):t._e(),5==e?a("span",[a("a-icon",{attrs:{type:"check-circle"}}),t._v(" 已上线")],1):t._e(),6==e?a("span",[a("a-icon",{attrs:{type:"frown"}}),t._v(" 上线失败")],1):t._e(),7==e?a("span",[a("a-icon",{attrs:{type:"close-circle"}}),t._v(" 已废弃")],1):t._e()])}},{key:"op",fn:function(e,i){return a("span",{},[a("a-dropdown",{attrs:{trigger:["click"]}},[a("a-menu",{attrs:{slot:"overlay"},on:{click:function(e){t.handleMenuClick(e,i)}},slot:"overlay"},[a("a-menu-item",{key:"view"},[a("a-icon",{attrs:{type:"eye"}}),t._v("查看")],1),t.$root.CheckPriv(t.$root.Priv.DEPLOY_DEPLOY_ALL)||t.$root.CheckPriv(t.$root.Priv.DEPLOY_DEPLOY_MY)&&i.user_id==t.$store.getters["account/getUserId"]?[3==i.status||4==i.status?a("a-menu-item",{key:"deploy"},[a("a-icon",{attrs:{type:"coffee"}}),t._v("上线")],1):t._e(),6==i.status&&t.$root.CheckPrivs([t.$root.Priv.DEPLOY_DEPLOY_MY,t.$root.Priv.DEPLOY_DEPLOY_ALL])?a("a-menu-item",{key:"deploy"},[a("a-icon",{attrs:{type:"coffee"}}),t._v("再次上线")],1):t._e()]:t._e(),t.$root.CheckPriv(t.$root.Priv.DEPLOY_EDIT_MY)&&i.user_id==t.$store.getters["account/getUserId"]?[1==i.status||2==i.status?a("a-menu-item",{key:"edit"},[a("a-icon",{attrs:{type:"edit"}}),t._v("编辑")],1):t._e()]:t._e(),t.$root.CheckPriv(t.$root.Priv.DEPLOY_AUDIT_ALL)||t.$root.CheckPriv(t.$root.Priv.DEPLOY_AUDIT_MY)&&i.user_id==t.$store.getters["account/getUserId"]?[1==i.status?a("a-menu-item",{key:"audit"},[a("a-icon",{attrs:{type:"audit"}}),t._v("审核")],1):t._e(),3==i.status?a("a-menu-item",{key:"unaudit"},[a("a-icon",{attrs:{type:"close"}}),t._v("取消审核")],1):t._e()]:t._e(),1!=i.status&&2!=i.status&&3!=i.status&&6!=i.status||!(t.$root.CheckPriv(t.$root.Priv.DEPLOY_DROP_ALL)||t.$root.CheckPriv(t.$root.Priv.DEPLOY_DROP_MY)&&i.user_id==t.$store.getters["account/getUserId"])?t._e():a("a-menu-item",{key:"discard"},[a("a-icon",{attrs:{type:"delete"}}),t._v("废弃")],1)],2),a("a-button",{staticStyle:{"margin-left":"8px"}},[t._v("\n                        操作 "),a("a-icon",{attrs:{type:"down"}})],1)],1)],1)}}])})],1),a("a-modal",{attrs:{title:"查看上线单",visible:t.dialogViewVisible,confirmLoading:t.dialogViewConfirmLoading,destroyOnClose:!0,width:"50%",footer:null},on:{cancel:t.dialogViewCancel}},[a("apply-view-component",{attrs:{detail:t.applyDetail}})],1),a("a-modal",{attrs:{title:"审核上线单",visible:t.dialogAuditVisible,confirmLoading:t.dialogAuditConfirmLoading,destroyOnClose:!0,width:"50%",okText:"审核",cancelText:"取消"},on:{ok:t.dialogAuditSubmit,cancel:t.dialogAuditCancel}},[a("apply-audit-component",{ref:"auditRef",attrs:{detail:t.applyDetail}})],1),a("a-modal",{attrs:{title:"编辑上线单",visible:t.dialogEditVisible,confirmLoading:t.dialogEditConfirmLoading,destroyOnClose:!0,width:"50%",okText:"再次提交审核",cancelText:"放弃"},on:{ok:t.dialogEditSubmit,cancel:t.dialogEditCancel}},[a("apply-update-component",{ref:"auditRef",attrs:{detail:t.applyDetail}})],1)],1)},n=[],o=(a("386d"),a("41db")),r=a("92fa"),s=a.n(r),l=(a("7f7f"),a("24b4")),c=a("f142"),d={render:function(){var t=arguments[0],e={labelCol:{span:6},wrapperCol:{span:16}};return t("a-form",[t("a-form-item",s()([{props:e},{attrs:{label:"项目空间"}}]),[this.detail.space_name]),t("a-form-item",s()([{props:e},{attrs:{label:"项目名称"}}]),[this.detail.project_name]),t("a-form-item",s()([{props:e},{attrs:{label:"上线单名称"}}]),[this.detail.name]),t("a-form-item",s()([{props:e},{attrs:{label:"上线模式"}}]),[1==this.detail.repo_mode?t("div",[t("div",[t("a-icon",{attrs:{type:"branches"}})," 分支上线 - ",t("strong",[this.detail.repo_branch])," 分支"]),t("div",["版本: ",this.detail.repo_commit])]):t("span",[t("a-icon",{attrs:{type:"tag"}})," Tag上线 - Tag: ",this.detail.repo_tag])]),t("a-form-item",s()([{props:e},{attrs:{label:"描述信息"}}]),[this.detail.description]),t("a-form-item",s()([{props:e},{attrs:{label:"状态"}}]),[this.applyStatusShow(this.detail.status)]),t("a-form-item",s()([{props:e},{attrs:{label:"申请时间"}}]),[this.$root.FormatDateTime(this.detail.ctime)]),t("a-form-item",s()([{props:e},{attrs:{label:"申请人"}}]),[this.detail.user_name," (",this.detail.user_email,")"]),t(c["default"],{attrs:{"log-data":this.operateLog}})])},data:function(){return{operateLog:[]}},components:{LogComponent:c["default"]},props:{detail:{type:Object,default:function(){return{}}}},methods:{applyStatusShow:function(t){var e="未知";switch(t){case 1:e="待审核";break;case 2:e="审核不通过";break;case 3:e="审核通过待上线";break;case 4:e="上线中";break;case 5:e="上线成功";break;case 6:e="上线失败";break;case 7:e="废弃";break}return e},loadOperateLog:function(){var t=this;Object(o["i"])({id:this.detail.id}).then(function(e){t.operateLog=e.list})}},mounted:function(){this.loadOperateLog()}},p=l["Form"].create()(d),u={render:function(){var t=arguments[0],e=this.form,a=e.getFieldDecorator,i=e.getFieldValue,n={labelCol:{span:6},wrapperCol:{span:16}};return a("id",{initialValue:this.detail.id}),t("a-form",[t("a-form-item",s()([{props:n},{attrs:{label:"项目空间"}}]),[this.detail.space_name]),t("a-form-item",s()([{props:n},{attrs:{label:"项目名称"}}]),[this.detail.project_name]),t("a-form-item",s()([{props:n},{attrs:{label:"上线单名称"}}]),[this.detail.name]),t("a-form-item",s()([{props:n},{attrs:{label:"上线模式"}}]),[1==this.detail.repo_mode?t("div",[t("div",[t("a-icon",{attrs:{type:"branches"}})," 分支上线 - ",t("strong",[this.detail.repo_branch])," 分支"]),t("div",["版本: ",this.detail.repo_commit])]):t("span",[t("a-icon",{attrs:{type:"tag"}})," Tag上线 - Tag: ",this.detail.repo_tag])]),t("a-form-item",s()([{props:n},{attrs:{label:"描述信息"}}]),[this.detail.description]),t("a-form-item",s()([{props:n},{attrs:{label:"申请人"}}]),[this.detail.user_name," (",this.detail.user_email,") - ",this.$root.FormatDateTime(this.detail.ctime)]),t("a-form-item",s()([{props:n},{attrs:{label:"审核"}}]),[a("audit",{initialValue:1})(t("a-radio-group",[t("a-radio",{attrs:{value:1}},[t("span",{class:"app-color-success"},["审核通过"])]),t("a-radio",{attrs:{value:0}},[t("span",{class:"app-color-error"},["审核拒绝"])])]))]),0==i("audit")?t("a-form-item",s()([{props:n},{attrs:{label:"拒绝原因"}}]),[a("reject_reason",{initialValue:""})(t("a-textarea",{attrs:{placeholder:"请输入拒绝原因",rows:3}}))]):""])},props:{detail:{type:Object,default:function(){return{}}}},methods:{}},h=l["Form"].create()(u),f=a("af43"),m={data:function(){return{tableColumns:[{dataIndex:"id",title:"ID",width:"6%"},{dataIndex:"name",title:"上线单名称",scopedSlots:{customRender:"name"}},{dataIndex:"project_name",title:"空间名称/项目名称",width:"30%",scopedSlots:{customRender:"project_name"}},{dataIndex:"ctime",title:"提交时间",width:"10%",scopedSlots:{customRender:"ctime"}},{dataIndex:"user_name",title:"提交者",width:"10%",scopedSlots:{customRender:"user_name"}},{dataIndex:"status",title:"状态",width:"12%",scopedSlots:{customRender:"status"}},{dataIndex:"op",title:"操作",width:"10%",align:"right",scopedSlots:{customRender:"op"}}],tableSource:[],pagination:{pageSize:10,current:1,total:0},tableLoading:!1,search:{keyword:"",projectId:void 0,time:void 0,status:void 0},searchProjectList:[],searchTime:[{day:1,title:"今天"},{day:7,title:"7天内"},{day:30,title:"一个月内"},{day:90,title:"3个月内"},{day:365,title:"一年内"},{day:0,title:"时间不限"}],searchStatus:[{id:0,title:"不限"},{id:1,title:"待审核"},{id:2,title:"审核拒绝"},{id:3,title:"待上线"},{id:4,title:"上线中"},{id:5,title:"已上线"},{id:6,title:"上线失败"},{id:7,title:"已废弃"}],dialogViewVisible:!1,dialogViewConfirmLoading:!1,applyDetail:{},dialogAuditVisible:!1,dialogAuditConfirmLoading:!1,dialogEditVisible:!1,dialogEditConfirmLoading:!1}},components:{ApplyViewComponent:p,ApplyAuditComponent:h,ApplyUpdateComponent:f["a"]},methods:{handleSearch:function(t){this.pagination.current=1,this.handleTableChange(this.pagination)},handleTableChange:function(t){this.pagination.current=t.current,this.getDataList({page:t.current,pageSize:t.pageSize})},handleMenuClick:function(t,e){var a=this,i=t.key;switch(i){case"view":this.handleShowView(e.id);break;case"edit":this.handleShowEdit(e.id);break;case"audit":this.handleShowAudit(e.id);break;case"unaudit":this.$confirm({title:"取消审核",content:"确定要取消已审核的上线单吗？",onOk:function(){a.handleUnAudit(e.id)},okText:"确定",cancelText:"取消"});break;case"discard":this.$confirm({title:"废弃上线单",content:"废弃后将无法恢复, 确定要废弃此上线单吗？",onOk:function(){a.handleDiscard(e.id)},okText:"确定",cancelText:"取消"});break;case"deploy":this.$root.GotoRouter("deployRelease",{id:e.id});break}},handleShowView:function(t){var e=this;this.dialogViewConfirmLoading=!0,Object(o["c"])({id:t}).then(function(t){e.dialogViewVisible=!0,e.dialogViewConfirmLoading=!1,e.applyDetail=t}).catch(function(t){e.dialogViewConfirmLoading=!1})},dialogViewCancel:function(){this.dialogViewVisible=!1},handleShowAudit:function(t){var e=this;this.dialogAuditConfirmLoading=!0,Object(o["c"])({id:t}).then(function(t){e.dialogAuditVisible=!0,e.dialogAuditConfirmLoading=!1,e.applyDetail=t}).catch(function(t){e.dialogAuditConfirmLoading=!1})},dialogAuditCancel:function(){this.dialogAuditVisible=!1},dialogAuditSubmit:function(){var t=this;this.$refs.auditRef.validateFields(function(e,a){e||(t.dialogAuditConfirmLoading=!0,Object(o["a"])(a).then(function(e){t.dialogAuditConfirmLoading=!1,t.handleTableChange(t.pagination),t.dialogAuditCancel()}).catch(function(e){t.dialogAuditConfirmLoading=!1}))})},handleShowEdit:function(t){var e=this;this.dialogEditConfirmLoading=!0,Object(o["c"])({id:t}).then(function(t){e.dialogEditVisible=!0,e.dialogEditConfirmLoading=!1,e.applyDetail=t}).catch(function(t){e.dialogEditConfirmLoading=!1})},dialogEditCancel:function(){this.dialogEditVisible=!1},dialogEditSubmit:function(){var t=this;this.$refs.auditRef.validateFields(function(e,a){e||(t.dialogEditConfirmLoading=!0,Object(o["q"])(a).then(function(e){t.dialogAuditConfirmLoading=!1,t.handleTableChange(t.pagination),t.dialogEditCancel()}).catch(function(e){t.dialogAuditConfirmLoading=!1}))})},handleUnAudit:function(t){var e=this,a=this.$message.loading("取消审核上线单...",0);Object(o["p"])({id:t}).then(function(t){a(),setTimeout(function(){e.$message.success("上线单取消成功")},500),e.handleTableChange(e.pagination)}).catch(function(t){a(),e.$message.error("上线单取消失败")})},handleDiscard:function(t){var e=this,a=this.$message.loading("废弃上线单...",0);Object(o["b"])({id:t}).then(function(t){a(),e.handleTableChange(e.pagination)}).catch(function(t){a(),e.$message.error("上线单废弃失败")})},rowClassName:function(t){var e="";switch(t){case 2:e="app-color-warning";break;case 4:e="app-color-info";break;case 7:e="app-color-gray";break;case 6:e="app-color-error";break}return e},getDataList:function(t){var e=this;this.tableLoading=!0;var a=(t.page-1)*t.pageSize;Object(o["d"])({keyword:this.search.keyword,project_id:this.search.projectId,time:this.search.time,status:this.search.status,offset:a,limit:t.pageSize}).then(function(t){e.tableLoading=!1,e.pagination.total=t.total,e.tableSource=t.list}).catch(function(t){e.tableLoading=!1})},getProjectList:function(){var t=this;Object(o["e"])().then(function(e){t.searchProjectList=e.list})}},mounted:function(){this.handleTableChange(this.pagination),this.getProjectList()}},g=m,b=a("2877"),_=Object(b["a"])(g,i,n,!1,null,null,null);_.options.__file="Deploy.vue";e["default"]=_.exports},f142:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-card",{attrs:{title:"操作日志",bodyStyle:{padding:"0px"},bordered:!1}},[a("a-table",{attrs:{columns:t.tableColumns,dataSource:t.logData,bordered:!1,pagination:!1,locale:{emptyText:"无日志"},showHeader:!1},scopedSlots:t._u([{key:"ctime",fn:function(e,i){return a("span",{staticClass:"app-cursor"},[a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("span",[t._v(t._s(t.$root.FormatDateTime(e)))])]),t._v("\n                    "+t._s(t.$root.FormatDateFromNow(e))+"\n                ")],2)],1)}},{key:"user",fn:function(e,i){return a("span",{},[i.user_id?[t._v("\n                    "+t._s(i.user_name)+"(UID:"+t._s(i.user_id)+")\n                ")]:[t._v("\n                    robot\n                ")]],2)}},{key:"op_content",fn:function(e,i){return a("span",{},[a("span",[t._v(t._s(t.$root.T(i.op_name)))]),i.op_content?a("span",[t._v(": "+t._s(i.op_content))]):t._e()])}}])})],1)],1)},n=[],o={data:function(){return{tableColumns:[{dataIndex:"op_content",scopedSlots:{customRender:"op_content"}},{dataIndex:"user",width:"25%",scopedSlots:{customRender:"user"}},{dataIndex:"ctime",width:"20%",scopedSlots:{customRender:"ctime"}}],dataSource:[]}},props:{logData:{type:Array,default:function(){return[]}},divider:{type:Boolean,default:!1}}},r=o,s=a("2877"),l=Object(s["a"])(r,i,n,!1,null,null,null);l.options.__file="Log.vue";e["default"]=l.exports}}]);