(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-91cc97ee"],{"214f":function(t,e,n){"use strict";var a=n("32e9"),i=n("2aba"),o=n("79e5"),r=n("be13"),l=n("2b4c");t.exports=function(t,e,n){var c=l(t),s=n(r,c,""[t]),d=s[0],u=s[1];o(function(){var e={};return e[c]=function(){return 7},7!=""[t](e)})&&(i(String.prototype,t,d),a(RegExp.prototype,c,2==e?function(t,e){return u.call(t,this,e)}:function(t){return u.call(t,this)}))}},"386d":function(t,e,n){n("214f")("search",1,function(t,e,n){return[function(n){"use strict";var a=t(this),i=void 0==n?void 0:n[e];return void 0!==i?i.call(n,a):new RegExp(n)[e](String(a))},n]})},"92fa":function(t,e){var n=/^(attrs|props|on|nativeOn|class|style|hook)$/;function a(t,e){return function(){t&&t.apply(this,arguments),e&&e.apply(this,arguments)}}t.exports=function(t){return t.reduce(function(t,e){var i,o,r,l,c;for(r in e)if(i=t[r],o=e[r],i&&n.test(r))if("class"===r&&("string"===typeof i&&(c=i,t[r]=i={},i[c]=!0),"string"===typeof o&&(c=o,e[r]=o={},o[c]=!0)),"on"===r||"nativeOn"===r||"hook"===r)for(l in o)i[l]=a(i[l],o[l]);else if(Array.isArray(i))t[r]=i.concat(o);else if(Array.isArray(o))t[r]=[i].concat(o);else for(l in o)i[l]=o[l];else t[r]=e[r];return t},{})}},9716:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("a-card",{staticClass:"app-card",attrs:{bordered:!1}},[n("div",{staticClass:"app-btn-group"},[n("a-row",{attrs:{gutter:10}},[n("a-col",{attrs:{span:4}},[t.$root.CheckPriv(t.$root.Priv.SERVER_GROUP_NEW)?n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:t.handleOpenAddGroupDialog}},[t._v("新增集群")]):t._e()],1),n("a-col",{attrs:{span:14}}),n("a-col",{attrs:{span:6}},[n("a-input-search",{attrs:{placeholder:"关键词搜索，ID、名称",enterButton:""},on:{search:t.handleSearch},model:{value:t.search.keyword,callback:function(e){t.$set(t.search,"keyword",e)},expression:"search.keyword"}})],1)],1)],1),n("a-table",{attrs:{columns:t.tableColumns,dataSource:t.tableSource,pagination:t.pagination,loading:t.tableLoading},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"op",fn:function(e,a){return n("span",{},[t.$root.CheckPriv(t.$root.Priv.SERVER_VIEW)?n("span",{staticClass:"app-link app-op",on:{click:function(e){t.handleShowServerList(a.id)}}},[n("a-icon",{attrs:{type:"bars"}}),t._v("服务器列表")],1):t._e(),t.$root.CheckPriv(t.$root.Priv.SERVER_GROUP_EDIT)?n("span",{staticClass:"app-link app-op",on:{click:function(e){t.handleOpenEditGroupDialog(a.id)}}},[n("a-icon",{attrs:{type:"edit"}}),t._v("编辑")],1):t._e(),t.$root.CheckPriv(t.$root.Priv.SERVER_GROUP_DEL)?n("a-popconfirm",{attrs:{title:"确定要删除此分组吗？",okText:"删除",cancelText:"取消"},on:{confirm:function(e){t.handleDeleteGroup(a.id)}}},[n("span",{staticClass:"app-link app-op app-remove"},[n("a-icon",{attrs:{type:"delete"}}),t._v("删除")],1)]):t._e()],1)}}])})],1),n("a-modal",{attrs:{title:t.dialogTitle,visible:t.dialogVisible,confirmLoading:t.dialogConfirmLoading,keyboard:!1,maskClosable:!1,okText:"确定",cancelText:"取消",destroyOnClose:!0},on:{ok:t.dialogSubmit,cancel:t.dialogCancel}},[n("a-spin",{attrs:{spinning:t.dialogLoading}},[n("group-update-component",{ref:"groupUpdateRef",attrs:{detail:t.dialogDetail}})],1)],1)],1)},i=[],o=(n("7f7f"),n("ac6a"),n("386d"),n("92fa")),r=n.n(o),l=n("24b4"),c={render:function(){var t=arguments[0],e=this.form,n=e.getFieldDecorator,a=(e.getFieldValue,{labelCol:{span:6},wrapperCol:{span:15}});return n("id",{initialValue:this.detail.id}),t("a-form",[t("a-form-item",r()([{props:a},{attrs:{label:"集群名称"}}]),[n("name",{rules:[{required:!0,message:"集群名称不能为空"}],initialValue:this.detail.name})(t("a-input",{attrs:{autocomplete:"off",placeholder:"请输入集群名称"}}))])])},props:{detail:{default:function(){return{}},type:Object}}},s=l["Form"].create()(c),d=n("aa22"),u={data:function(){return{tableColumns:[{dataIndex:"id",title:"集群ID",width:"10%"},{dataIndex:"name",title:"集群名称"},{dataIndex:"op",title:"操作",width:"30%",align:"right",scopedSlots:{customRender:"op"}}],tableSource:[],pagination:{pageSize:10,current:1,total:0},tableLoading:!1,dialogTitle:"",dialogVisible:!1,dialogConfirmLoading:!1,dialogDetail:{},dialogLoading:!1,search:{keyword:""}}},components:{GroupUpdateComponent:s},methods:{handleSearch:function(t){this.search.keyword=t,this.pagination.current=1,this.handleTableChange(this.pagination)},handleTableChange:function(t){this.pagination.current=t.current,this.getDataList({page:t.current,pageSize:t.pageSize})},handleOpenAddGroupDialog:function(){this.dialogTitle="新增集群",this.dialogVisible=!0,this.dialogDetail={}},handleOpenEditGroupDialog:function(t){this.dialogTitle="编辑集群信息",this.dialogVisible=!0,this.dialogDetail={},this.getDataDetail(t)},handleDeleteGroup:function(t){var e=this;Object(d["a"])({id:t}).then(function(t){e.$message.success("删除成功",1),e.$root.ResetPagination(e.pagination),e.handleTableChange(e.pagination)})},handleShowServerList:function(t){var e=this,n=this.$createElement;Object(d["f"])({group_id:t}).then(function(t){var a=t.list?t.list:[],i=[];a.forEach(function(t){var a="/server/list?op=edit&id="+t.id;i.push(n("div",{class:"item"},[n("span",{style:"display:inline-block; width: 50%"},[n("icon-server")," ",t.ip,":[",t.ssh_port,"]",e.$root.CheckPriv(e.$root.Priv.SERVER_EDIT)?n("a",{class:"op",attrs:{target:"_blank",href:a}},["编辑"]):""]),n("span",{style:"display:inline-block; width: 50%"},[t.name])]))}),0==i.length&&(i=n("div",["暂无服务器"])),e.$info({title:"服务器列表",width:"50vw",content:n("div",{class:"app-modal-list"},[i])})})},dialogCancel:function(){this.dialogVisible=!1},dialogSubmit:function(){var t=this;this.$refs.groupUpdateRef.validateFields(function(e,n){e||(t.dialogConfirmLoading=!0,t.dialogDetail.id?Object(d["i"])(n).then(function(e){t.$message.success("集群更新成功",1,function(){t.dialogCancel(),t.dialogConfirmLoading=!1,t.handleTableChange(t.pagination)})}).catch(function(e){t.dialogConfirmLoading=!1}):Object(d["g"])(n).then(function(e){t.$message.success("集群创建成功",1,function(){t.dialogCancel(),t.dialogConfirmLoading=!1,t.handleTableChange(t.pagination)})}).catch(function(e){t.dialogConfirmLoading=!1}))})},getDataDetail:function(t){var e=this;this.dialogLoading=!0,Object(d["c"])({id:t}).then(function(t){e.dialogLoading=!1,e.dialogDetail=t}).catch(function(t){e.dialogLoading=!1})},getDataList:function(t){var e=this;this.tableLoading=!0;var n=(t.page-1)*t.pageSize;Object(d["d"])({keyword:this.search.keyword,offset:n,limit:t.pageSize}).then(function(t){e.tableLoading=!1,e.pagination.total=t.total,e.tableSource=t.list}).catch(function(t){e.tableLoading=!1})}},mounted:function(){this.handleTableChange(this.pagination)}},p=u,g=n("2877"),f=Object(g["a"])(p,a,i,!1,null,null,null);f.options.__file="Group.vue";e["default"]=f.exports},aa22:function(t,e,n){"use strict";n.d(e,"g",function(){return i}),n.d(e,"i",function(){return o}),n.d(e,"d",function(){return r}),n.d(e,"c",function(){return l}),n.d(e,"a",function(){return c}),n.d(e,"h",function(){return s}),n.d(e,"j",function(){return d}),n.d(e,"f",function(){return u}),n.d(e,"e",function(){return p}),n.d(e,"b",function(){return g});var a=n("e1d2");function i(t){return Object(a["b"])("/server/group/new",t)}function o(t){return Object(a["b"])("/server/group/update",t)}function r(t){return Object(a["a"])("/server/group/list",t)}function l(t){return Object(a["a"])("/server/group/detail",t)}function c(t){return Object(a["b"])("/server/group/delete",t)}function s(t){return Object(a["b"])("/server/new",t)}function d(t){return Object(a["b"])("/server/update",t)}function u(t){return Object(a["a"])("/server/list",t)}function p(t){return Object(a["a"])("/server/detail",t)}function g(t){return Object(a["b"])("/server/delete",t)}}}]);