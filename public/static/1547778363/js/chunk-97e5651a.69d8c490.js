(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-97e5651a"],{"1f0d":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("a-card",{staticClass:"app-card",attrs:{title:"项目空间",bordered:!1}},[n("div",{staticClass:"app-btn-group"},[n("a-row",{attrs:{gutter:10}},[n("a-col",{attrs:{span:4}},[t.$root.CheckPriv(t.$root.Priv.PROJECT_SPACE_NEW)?n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:t.handleOpenAddDialog}},[t._v("新增")]):t._e()],1),n("a-col",{attrs:{span:14}}),n("a-col",{attrs:{span:6}},[n("a-input-search",{attrs:{placeholder:"按名称搜索",enterButton:""},on:{search:t.handleSearch},model:{value:t.search.keyword,callback:function(e){t.$set(t.search,"keyword",e)},expression:"search.keyword"}})],1)],1)],1),n("a-table",{attrs:{columns:t.tableColumns,dataSource:t.tableSource,pagination:t.pagination,loading:t.tableLoading},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"name",fn:function(e,a){return n("span",{staticClass:"app-content-list"},[n("div",{staticClass:"title"},[t._v(t._s(a.name))]),a.description?n("div",{staticClass:"description"},[t._v(t._s(a.description))]):t._e()])}},{key:"op",fn:function(e,a){return n("span",{},[t.$root.CheckPriv(t.$root.Priv.PROJECT_VIEW)?n("span",{staticClass:"app-link app-op",on:{click:function(e){t.$root.GotoRouter("projectProject",{space:a.id})}}},[n("icon-project"),t._v("项目管理")],1):t._e(),t.$root.CheckPriv(t.$root.Priv.PROJECT_USER_VIEW)?n("span",{staticClass:"app-link app-op",on:{click:function(e){t.$root.GotoRouter("projectUser",{space:a.id})}}},[n("a-icon",{attrs:{type:"team"}}),t._v("成员管理")],1):t._e(),t.$root.CheckPriv(t.$root.Priv.PROJECT_SPACE_EDIT)?n("span",{staticClass:"app-link app-op",on:{click:function(e){t.handleOpenUpdateDialog(a.id)}}},[n("a-icon",{attrs:{type:"edit"}}),t._v("编辑")],1):t._e(),t.$root.CheckPriv(t.$root.Priv.PROJECT_SPACE_DEL)?[a.have_project?[n("a-tooltip",{attrs:{placement:"topRight"}},[n("template",{slot:"title"},[n("span",[t._v("项目列表不为空，禁止删除")])]),n("span",{staticClass:"app-op app-color-gray app-no-allow"},[n("a-icon",{attrs:{type:"delete"}}),t._v("删除")],1)],2)]:[n("a-popconfirm",{attrs:{title:"确定要删除此分组吗？",okText:"删除",cancelText:"取消"},on:{confirm:function(e){t.handleDelete(a.id)}}},[n("span",{staticClass:"app-link app-op app-remove"},[n("a-icon",{attrs:{type:"delete"}}),t._v("删除")],1)])]]:t._e()],2)}}])})],1),n("a-modal",{attrs:{title:t.dialogTitle,visible:t.dialogVisible,confirmLoading:t.dialogConfirmLoading,keyboard:!1,maskClosable:!1,okText:"确定",cancelText:"取消",destroyOnClose:!0},on:{ok:t.dialogSubmit,cancel:t.dialogCancel}},[n("a-spin",{attrs:{spinning:t.dialogLoading}},[n("space-update-component",{ref:"updateRef",attrs:{detail:t.dialogDetail}})],1)],1)],1)},i=[],o=(n("386d"),n("24d2")),r=n("92fa"),c=n.n(r),s=(n("7f7f"),n("24b4")),l={render:function(){var t=arguments[0],e=this.form,n=e.getFieldDecorator,a=(e.getFieldValue,{labelCol:{span:6},wrapperCol:{span:16}});n("id",{initialValue:this.detail.id});var i=this,r=function(t,e,n){e?(i.nameHelp="正在验证名称是否被占用...",Object(o["e"])({id:i.detail.id,keyword:e}).then(function(t){t.exists?(i.nameHelp="抱歉！该名称已经存在，请重新输入",n("抱歉！该名称已经存在，请重新输入")):(i.nameHelp=void 0,n())}).catch(function(t){i.nameHelp="网络错误, 校验失败",n("网络错误, 校验失败")})):n()};return t("a-form",[t("a-form-item",c()([{props:a},{attrs:{help:this.nameHelp,label:"项目空间名称"}}]),[n("name",{rules:[{required:!0,message:"项目空间名称不能为空"},{validator:r}],initialValue:this.detail.name,validateTrigger:"blur"})(t("a-input",{attrs:{autocomplete:"off",placeholder:"请输入项目空间名称"}}))]),t("a-form-item",c()([{props:a},{attrs:{label:"描述信息"}}]),[n("description",{initialValue:this.detail.description})(t("a-textarea",{attrs:{placeholder:"请输入描述信息, 500字以内",rows:3}}))])])},props:{detail:{default:function(){return{}},type:Object}},data:function(){return{nameHelp:void 0}}},u=s["Form"].create()(l),d={components:{SpaceUpdateComponent:u},data:function(){return{tableLoading:!1,tableColumns:[{dataIndex:"name",title:"项目空间",scopedSlots:{customRender:"name"}},{dataIndex:"op",title:"操作",width:"30%",align:"right",scopedSlots:{customRender:"op"}}],tableSource:[],search:{keyword:""},pagination:{pageSize:10,current:1,total:0},dialogTitle:"",dialogDetail:{},dialogVisible:!1,dialogConfirmLoading:!1,dialogLoading:!1}},methods:{handleSearch:function(t){this.search.keyword=t,this.pagination.current=1,this.handleTableChange(this.pagination)},handleTableChange:function(t){this.pagination.current=t.current,this.getDataList({page:t.current,pageSize:t.pageSize})},handleOpenAddDialog:function(){this.dialogTitle="新增项目空间",this.dialogDetail={},this.dialogVisible=!0},handleOpenUpdateDialog:function(t){this.dialogTitle="编辑项目空间",this.dialogVisible=!0,this.dialogDetail={},this.getDataDetail(t)},handleDelete:function(t){var e=this;Object(o["g"])({id:t}).then(function(t){e.$message.success("删除成功",1),e.$root.ResetPagination(e.pagination),e.handleTableChange(e.pagination)})},dialogSubmit:function(){var t=this;this.$refs.updateRef.validateFields(function(e,n){e||(t.dialogConfirmLoading=!0,t.dialogDetail.id?Object(o["s"])(n).then(function(e){t.$message.success("更新项目空间成功",1,function(){t.dialogCancel(),t.dialogConfirmLoading=!1,t.handleTableChange(t.pagination)})}).catch(function(e){t.dialogConfirmLoading=!1}):Object(o["n"])(n).then(function(e){t.$message.success("新增项目空间成功",1,function(){t.dialogCancel(),t.dialogConfirmLoading=!1,t.handleTableChange(t.pagination)})}).catch(function(e){t.dialogConfirmLoading=!1}))})},dialogCancel:function(){this.dialogVisible=!1},getDataDetail:function(t){var e=this;this.dialogLoading=!0,Object(o["i"])({id:t}).then(function(t){e.dialogLoading=!1,e.dialogDetail=t}).catch(function(t){e.dialogLoading=!1})},getDataList:function(t){var e=this;this.tableLoading=!0;var n=(t.page-1)*t.pageSize;Object(o["j"])({keyword:this.search.keyword,offset:n,limit:t.pageSize}).then(function(t){e.tableLoading=!1,e.pagination.total=t.total,e.tableSource=t.list}).catch(function(t){e.tableLoading=!1})}},mounted:function(){this.handleTableChange(this.pagination)}},p=d,f=n("2877"),g=Object(f["a"])(p,a,i,!1,null,null,null);g.options.__file="Space.vue";e["default"]=g.exports},"214f":function(t,e,n){"use strict";var a=n("32e9"),i=n("2aba"),o=n("79e5"),r=n("be13"),c=n("2b4c");t.exports=function(t,e,n){var s=c(t),l=n(r,s,""[t]),u=l[0],d=l[1];o(function(){var e={};return e[s]=function(){return 7},7!=""[t](e)})&&(i(String.prototype,t,u),a(RegExp.prototype,s,2==e?function(t,e){return d.call(t,this,e)}:function(t){return d.call(t,this)}))}},"24d2":function(t,e,n){"use strict";n.d(e,"m",function(){return i}),n.d(e,"r",function(){return o}),n.d(e,"l",function(){return r}),n.d(e,"h",function(){return c}),n.d(e,"f",function(){return s}),n.d(e,"b",function(){return l}),n.d(e,"j",function(){return u}),n.d(e,"n",function(){return d}),n.d(e,"s",function(){return p}),n.d(e,"i",function(){return f}),n.d(e,"g",function(){return g}),n.d(e,"e",function(){return h}),n.d(e,"c",function(){return b}),n.d(e,"a",function(){return m}),n.d(e,"k",function(){return v}),n.d(e,"o",function(){return j}),n.d(e,"q",function(){return C}),n.d(e,"p",function(){return O}),n.d(e,"d",function(){return k});n("cadf"),n("551c"),n("097d");var a=n("e1d2");function i(t){return Object(a["b"])("/project/new",t)}function o(t){return Object(a["b"])("/project/update",t)}function r(t){return Object(a["a"])("/project/list",t)}function c(t){return Object(a["a"])("/project/detail",t)}function s(t){return Object(a["b"])("/project/delete",t)}function l(t){return Object(a["b"])("/project/status/change",t)}function u(t){return Object(a["a"])("/project/space/list",t)}function d(t){return Object(a["b"])("/project/space/new",t)}function p(t){return Object(a["b"])("/project/space/update",t)}function f(t){return Object(a["a"])("/project/space/detail",t)}function g(t){return Object(a["b"])("/project/space/delete",t)}function h(t){return Object(a["a"])("/project/space/exists",t)}function b(t){return Object(a["a"])("/project/exists",t)}function m(t){return Object(a["b"])("/project/user/add",t)}function v(t){return Object(a["a"])("/project/user/list",t)}function j(t){return Object(a["b"])("/project/user/remove",t)}function C(t){return Object(a["a"])("/project/user/search",t)}function O(t){return Object(a["b"])("/project/repo/reset",t)}function k(t){return Object(a["a"])("/project/server/check",t)}},"386d":function(t,e,n){n("214f")("search",1,function(t,e,n){return[function(n){"use strict";var a=t(this),i=void 0==n?void 0:n[e];return void 0!==i?i.call(n,a):new RegExp(n)[e](String(a))},n]})},"92fa":function(t,e){var n=/^(attrs|props|on|nativeOn|class|style|hook)$/;function a(t,e){return function(){t&&t.apply(this,arguments),e&&e.apply(this,arguments)}}t.exports=function(t){return t.reduce(function(t,e){var i,o,r,c,s;for(r in e)if(i=t[r],o=e[r],i&&n.test(r))if("class"===r&&("string"===typeof i&&(s=i,t[r]=i={},i[s]=!0),"string"===typeof o&&(s=o,e[r]=o={},o[s]=!0)),"on"===r||"nativeOn"===r||"hook"===r)for(c in o)i[c]=a(i[c],o[c]);else if(Array.isArray(i))t[r]=i.concat(o);else if(Array.isArray(o))t[r]=[i].concat(o);else for(c in o)i[c]=o[c];else t[r]=e[r];return t},{})}}}]);