(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ede2b85c"],{"214f":function(t,e,n){"use strict";var i=n("32e9"),a=n("2aba"),r=n("79e5"),o=n("be13"),c=n("2b4c");t.exports=function(t,e,n){var s=c(t),l=n(o,s,""[t]),u=l[0],d=l[1];r(function(){var e={};return e[s]=function(){return 7},7!=""[t](e)})&&(a(String.prototype,t,u),i(RegExp.prototype,s,2==e?function(t,e){return d.call(t,this,e)}:function(t){return d.call(t,this)}))}},"386d":function(t,e,n){n("214f")("search",1,function(t,e,n){return[function(n){"use strict";var i=t(this),a=void 0==n?void 0:n[e];return void 0!==a?a.call(n,i):new RegExp(n)[e](String(i))},n]})},7233:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("a-card",{staticClass:"app-card",attrs:{bordered:!1}},[n("div",{staticClass:"app-btn-group"},[n("a-row",{attrs:{gutter:10}},[n("a-col",{attrs:{span:4}},[t.$root.CheckPriv(t.$root.Priv.USER_ROLE_NEW)?[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:t.handleOpenAddDialog}},[t._v("新增角色")])]:t._e()],2),n("a-col",{attrs:{span:14}}),n("a-col",{attrs:{span:6}},[n("a-input-search",{attrs:{placeholder:"关键词搜索，ID、名称",enterButton:""},on:{search:t.handleSearch},model:{value:t.search.keyword,callback:function(e){t.$set(t.search,"keyword",e)},expression:"search.keyword"}})],1)],1)],1),n("a-table",{attrs:{columns:t.tableColumns,dataSource:t.tableSource,pagination:t.pagination,loading:t.tableLoading},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"op",fn:function(e,i){return n("span",{},[t.$root.CheckPriv(t.$root.Priv.USER_ROLE_EDIT)?n("span",{staticClass:"app-link app-op",on:{click:function(e){t.handleOpenEditDialog(i.id)}}},[n("a-icon",{attrs:{type:"edit"}}),t._v("编辑")],1):t._e(),t.$root.CheckPriv(t.$root.Priv.USER_ROLE_DEL)?n("a-popconfirm",{attrs:{title:"确定要删除此服务器吗？",okText:"删除",cancelText:"取消"},on:{confirm:function(e){t.handleDeleteGroup(i.id)}}},[n("span",{staticClass:"app-link app-op app-remove"},[n("a-icon",{attrs:{type:"delete"}}),t._v("删除")],1)]):t._e()],1)}}])})],1),n("a-modal",{attrs:{title:t.dialogTitle,visible:t.dialogVisible,confirmLoading:t.dialogConfirmLoading,keyboard:!1,maskClosable:!1,okText:"确定",cancelText:"取消",width:"55vw",destroyOnClose:!0},on:{ok:t.dialogSubmit,cancel:t.dialogCancel}},[n("a-spin",{attrs:{spinning:t.dialogLoading}},[n("group-update-component",{ref:"updateRef",attrs:{detail:t.dialogDetail}})],1)],1)],1)},a=[],r=(n("386d"),n("c24f")),o=n("92fa"),c=n.n(o),s=(n("7f7f"),n("ac6a"),n("24b4")),l={render:function(){var t=arguments[0],e=this.form,n=e.getFieldDecorator,i=(e.getFieldValue,{labelCol:{span:4},wrapperCol:{span:19}});n("id",{initialValue:this.detail.id}),n("priv",{initialValue:this.detail.priv?this.detail.priv:[]});var a=[];this.plainPrivCheckList.forEach(function(e){var n=[];e.items.forEach(function(e){n.push(t("a-checkbox",{attrs:{value:e.value}},[e.label]))}),a.push(t("a-row",{class:"item"},[t("a-col",{attrs:{span:3}},[e.label]),t("a-col",{attrs:{span:21}},[n])]))});var o=this,s=function(t,e){return function(n,i,a){if(i){var c="角色名称";o.$set(o.helps,t,"正在验证 ".concat(i," 是否被占用...")),Object(r["a"])({id:o.detail.id,keyword:i}).then(function(n){n.exists?(o.$set(o.helps,t,"抱歉！".concat(c,"已被占用，请重新输入")),a(e)):(o.$set(o.helps,t,void 0),a())}).catch(function(e){o.$set(o.helps,t,"网络错误, 校验失败"),a("网络错误, 校验失败")})}else a()}};return t("a-form",[t("a-form-item",c()([{props:i},{attrs:{help:this.helps.name,label:"角色名称"}}]),[n("name",{rules:[{required:!0,message:"角色名称不能为空"},{validator:s("name","角色名称已经存在")}],initialValue:this.detail.name,validateTrigger:"blur"})(t("a-input",{attrs:{autocomplete:"off",placeholder:"请输入角色名称"}}))]),t("a-form-item",c()([{props:i},{attrs:{label:"权限设置"}}]),[t("a-checkbox",{attrs:{indeterminate:this.indeterminate,checked:this.checkPrivAll},on:{change:this.handleCheckAllPrivChange}},["全选"]),t("div",{class:"app-check-box"},[t("a-checkbox-group",{attrs:{value:this.checkedPrivList},on:{change:this.handleCheckPrivChange}},[a])])])])},props:{detail:{default:function(){return{}},type:Object}},watch:{detail:function(){this.handleCheckPrivChange(this.detail.priv)},plainPrivCheckList:function(){this.handleCheckPrivChange(this.detail.priv)}},data:function(){return{checkPrivAll:!1,indeterminate:!1,checkedPrivList:[],plainPrivCheckList:[],helps:{}}},methods:{handleCheckAllPrivChange:function(t){this.checkPrivAll=t.target.checked,this.indeterminate=!1;var e=[];this.checkPrivAll&&this.plainPrivCheckList.forEach(function(t){t.items.forEach(function(t){e.push(t.value)})}),this.checkedPrivList=e,this.form.setFieldsValue({priv:e})},handleCheckPrivChange:function(t){if(!t)return!1;var e=!0;this.plainPrivCheckList.forEach(function(n){n.items.forEach(function(n){-1==t.indexOf(n.value)&&(e=!1)})}),this.checkPrivAll=e,this.indeterminate=!1,t.length>0&&!e&&(this.indeterminate=!0),this.checkedPrivList=t,this.form.setFieldsValue({priv:t})},loadPrivListData:function(){var t=this;Object(r["g"])().then(function(e){t.plainPrivCheckList=e.list})}},mounted:function(){this.loadPrivListData()}},u=s["Form"].create()(l),d={data:function(){return{search:{},tableColumns:[{dataIndex:"id",title:"ID",width:"10%"},{dataIndex:"name",title:"名称"},{dataIndex:"op",title:"操作",width:"30%",align:"right",scopedSlots:{customRender:"op"}}],tableSource:[],pagination:{pageSize:10,current:1,total:0},tableLoading:!1,dialogTitle:"",dialogVisible:!1,dialogConfirmLoading:!1,dialogLoading:!1,dialogDetail:{}}},components:{GroupUpdateComponent:u},methods:{handleTableChange:function(t){this.pagination.current=t.current,this.getDataList({page:t.current,pageSize:t.pageSize})},handleOpenAddDialog:function(){this.dialogTitle="新增角色",this.dialogVisible=!0,this.dialogDetail={}},handleOpenEditDialog:function(t){this.dialogTitle="编辑角色信息",this.dialogVisible=!0,this.dialogDetail={},this.getDataDetail(t)},handleSearch:function(t){this.search.keyword=t,this.pagination.current=1,this.handleTableChange(this.pagination)},handleDeleteGroup:function(t){var e=this;Object(r["c"])({id:t}).then(function(t){e.$message.success("删除成功",1),e.$root.ResetPagination(e.pagination),e.handleTableChange(e.pagination)})},dialogSubmit:function(){var t=this;this.$refs.updateRef.validateFields(function(e,n){e||(t.dialogConfirmLoading=!0,t.dialogDetail.id?Object(r["o"])(n).then(function(e){t.$message.success("角色信息更新成功",1,function(){t.dialogCancel(),t.dialogConfirmLoading=!1,t.handleTableChange(t.pagination)})}).catch(function(e){t.dialogConfirmLoading=!1}):Object(r["m"])(n).then(function(e){t.$message.success("角色信息创建成功",1,function(){t.dialogCancel(),t.dialogConfirmLoading=!1,t.handleTableChange(t.pagination)})}).catch(function(e){t.dialogConfirmLoading=!1}))})},dialogCancel:function(){this.dialogVisible=!1},getDataList:function(t){var e=this;this.tableLoading=!0;var n=(t.page-1)*t.pageSize,i=this.search.keyword;Object(r["f"])({keyword:i,offset:n,limit:t.pageSize}).then(function(t){e.tableLoading=!1,e.pagination.total=t.total,e.tableSource=t.list}).catch(function(t){e.tableLoading=!1})},getDataDetail:function(t){var e=this;this.dialogLoading=!0,Object(r["e"])({id:t}).then(function(t){e.dialogLoading=!1,e.dialogDetail=t}).catch(function(t){e.dialogLoading=!1})}},mounted:function(){this.handleTableChange(this.pagination)}},h=d,f=n("2877"),p=Object(f["a"])(h,i,a,!1,null,null,null);p.options.__file="Group.vue";e["default"]=p.exports},"92fa":function(t,e){var n=/^(attrs|props|on|nativeOn|class|style|hook)$/;function i(t,e){return function(){t&&t.apply(this,arguments),e&&e.apply(this,arguments)}}t.exports=function(t){return t.reduce(function(t,e){var a,r,o,c,s;for(o in e)if(a=t[o],r=e[o],a&&n.test(o))if("class"===o&&("string"===typeof a&&(s=a,t[o]=a={},a[s]=!0),"string"===typeof r&&(s=r,e[o]=r={},r[s]=!0)),"on"===o||"nativeOn"===o||"hook"===o)for(c in r)a[c]=i(a[c],r[c]);else if(Array.isArray(a))t[o]=a.concat(r);else if(Array.isArray(r))t[o]=[a].concat(r);else for(c in r)a[c]=r[c];else t[o]=e[o];return t},{})}},c24f:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"m",function(){return r}),n.d(e,"o",function(){return o}),n.d(e,"f",function(){return c}),n.d(e,"e",function(){return s}),n.d(e,"c",function(){return l}),n.d(e,"g",function(){return u}),n.d(e,"n",function(){return d}),n.d(e,"r",function(){return h}),n.d(e,"i",function(){return f}),n.d(e,"h",function(){return p}),n.d(e,"b",function(){return g}),n.d(e,"d",function(){return b}),n.d(e,"j",function(){return v}),n.d(e,"l",function(){return m}),n.d(e,"k",function(){return k}),n.d(e,"p",function(){return C}),n.d(e,"q",function(){return O});var i=n("e1d2");function a(t){return Object(i["a"])("/user/group/checkexists",t)}function r(t){return Object(i["b"])("/user/group/new",t)}function o(t){return Object(i["b"])("/user/group/update",t)}function c(t){return Object(i["a"])("/user/group/list",t)}function s(t){return Object(i["a"])("/user/group/detail",t)}function l(t){return Object(i["b"])("/user/group/delete",t)}function u(){return Object(i["a"])("/user/group/priv")}function d(t){return Object(i["b"])("/user/new",t)}function h(t){return Object(i["b"])("/user/update",t)}function f(t){return Object(i["a"])("/user/list",t)}function p(t){return Object(i["a"])("/user/detail",t)}function g(t){return Object(i["a"])("/user/checkexists",t)}function b(t){return Object(i["b"])("/user/delete",t)}function v(t){return Object(i["b"])("/user/login",t)}function m(){return Object(i["b"])("/user/logout")}function k(){return Object(i["a"])("/user/login/status")}function C(t){return Object(i["b"])("/user/my/update",t)}function O(t){return Object(i["b"])("/user/my/password",t)}}}]);